<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>StylMore - Layout Demo</title>
<script type="text/javascript" src="res/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="res/jquery-ui-1.11.4/jquery-ui.min.js"></script>
<link rel="stylesheet" href="common.css">
<link rel="stylesheet" href="layout.css">
<link rel="stylesheet" href="../css/stylmore.css">
<link rel="stylesheet" href="res/jquery-ui-1.11.4/jquery-ui.min.css">
</head>
<body>

<div id="previewSizePrototype" style="display: none">
    <div class="previewSize">
        <div class="label">View Port Size: <span class="size">1300px</span></div>
        <div class="control">
            <div class="slider"></div>
            <table class="key">
                <tr>
                    <td class="mini odd">mini</td>
                    <td class="small">small</td>
                    <td class="medium odd">medium</td>
                    <td class="large">large</td>
                </tr>
            </table>
        </div>
    </div>
</div>

<div id="mainContent">
    <h2>Responsive Layouts</h2>
    <p>Fixed layout sets the width to a fixed pixel size depending on the screen 
    size. 1152 pixels for screens wider than 1200 pixels, 960 pixels for screens 
    between 1000 pixels and 1200 pixels and 100% of the width for smaller screens.
    </p>
    <p>Relative layout sets the max width to a size relative to the font size.
    Small: 40em, Normal 80em and Large 120em.</p>
    <div class="example">
        <div class="header">
            <label>Layout align:
                <select id="layoutsAlignSelect" autocomplete="off">
                    <option value="left">Left</option>
                    <option value="center">Center</option>
                    <option value="right">Right</option>
                </select>
            </label>
            <label>Relative layout size:
                <select id="layoutsSizeSelect" autocomplete="off">
                    <option value="small">Small (40em)</option>
                    <option value="" selected="selected">Normal (60em)</option>
                    <option value="large">Large (80em)</option>
                </select>
            </label>
        </div>
        <div class="frameScroll"><iframe id="layouts" src="layouts.html"></iframe></div>
        <div class="footer"></div>
    </div>
    
    <h2>Standard grid columns</h2>
    <div class="example">
        <div class="header"></div>
        <div class="frameScroll"><iframe src="layoutGridStandard.html"></iframe></div>
        <div class="footer"></div>
    </div>
    
    <h2>Responsive Grid Columns</h2>
    <div class="example">
        <div class="header"></div>
        <div class="frameScroll"><iframe src="layoutGridResponsive.html"></iframe></div>
        <div class="footer"></div>
    </div>
    
    <h2>Grid Gutters</h2>
    <div class="example">
        <div class="header">
            <div>
                <label>
                Grid Gutter Size:
                <select id="gutterGridSelect" autocomplete="off">
                    <option value="">None</option>
                    <option value=" gutter-small" selected="selected">Gutter Small (10px)</option>
                    <option value=" gutter-medium">Gutter Medium (20px)</option>
                    <option value=" gutter-large">Gutter Large (30px)</option>
                    <option value=" gutter-1ex">Gutter 1ex</option>
                    <option value=" gutter-2ex">Gutter 2ex</option>
                    <option value=" gutter-3ex">Gutter 3ex</option>
                    <option value=" gutter-4ex">Gutter 4ex</option>
                </select>
                </label>
                <label>
                Row Gutter Size:
                <select id="gutterRowSelect" autocomplete="off">
                    <option value=" gutter-none">None</option>
                    <option value=" gutter-small">Gutter Small (10px)</option>
                    <option value=" gutter-medium" selected="selected">Gutter Medium (20px)</option>
                    <option value=" gutter-large">Gutter Large (30px)</option>
                    <option value=" gutter-1ex">Gutter 1ex</option>
                    <option value=" gutter-2ex">Gutter 2ex</option>
                    <option value=" gutter-3ex">Gutter 3ex</option>
                    <option value=" gutter-4ex">Gutter 4ex</option>
                </select>
                </label>
            </div>
        </div>
        <div class="frameScroll"><iframe id="frameLayoutGridGutter" src="layoutGridGutter.html"></iframe></div>
        <div class="footer"></div>
    </div>
</div>

<script>
$(document).ready(function() {
    var iframes = $('iframe');
    iframes.load(function() {
        var frame = this;
        var exampleNode = this.parentNode.parentNode;
        
        var codeBlock = $('<code></code>').appendTo($('.footer', exampleNode));
        $(this).bind('exampleUpdate', function() {
            var html = '';
            $('.example', this.contentDocument).each(function() {html += $(this).html()});
            codeBlock.text(html);
        });
        $(this).trigger('exampleUpdate');
        
        var previewSize = $('#previewSizePrototype').children().clone();
        var size = $('.size', previewSize);
        $('.slider', previewSize).slider({
            min: 300,
            max: 1300,
            step: 50,
            value: 1300,
            slide: function(event, ui) {
                size.text(ui.value + 'px');
                $(frame)
                    .css({'width': ui.value + 'px', 'height': ''})
                    //.height(function() {return $(this.contentDocument).height()});
                    .height($(frame.contentDocument).height());
            }
        });
        $('.header', exampleNode).prepend(previewSize);
        
        $(this).height($(this.contentDocument).height());
    });
    
    $('#layoutsAlignSelect').change(function(event) {
        var layouts = $('#layouts')
        $('.layout', layouts[0].contentDocument)
            .removeClass('left center right')
            .addClass(this.value);
        layouts.trigger('exampleUpdate');
    });
    
    $('#layoutsSizeSelect').change(function(event) {
        var layouts = $('#layouts')
        $('.layout.relative', layouts[0].contentDocument)
            .removeClass('small large')
            .addClass(this.value);
        layouts.trigger('exampleUpdate');
    });
    
    $('#gutterGridSelect').change(function(event) {
        var frame = $('#frameLayoutGridGutter');
        $('#grid', frame[0].contentDocument)
            .removeClass(function(index, className) {
                var match = className.match(/gutter-\w*/g);
                return null === match ? '' : match.join(' ');
            })
            .addClass(this.value);
        frame.trigger('exampleUpdate');
    });
    
    $('#gutterRowSelect').change(function(event) {
        var frame = $('#frameLayoutGridGutter');
        $('#row2', frame[0].contentDocument)
            .removeClass(function(index, className) {
                var match = className.match(/gutter-\w*/g);
                return null === match ? '' : match.join(' ');
            })
            .addClass(this.value);
        frame.trigger('exampleUpdate');
    });
    
    //     var iframeDoc = $(iframe[0].contentDocument);
//     var refreshCode = function() {
//         console.log('refresh');
//         $('.example', iframeDoc).each(function() {
//             $('#' + this.id + 'Code', iframeDoc).text(this.outerHTML);
//         });
//     };
//     var grid = $('#grid', iframeDoc);
//     $('#gutterSelect').change(function(event) {
//         grid
//             .removeClass(function(index, className) {
//                 var match = className.match(/gutter\w*/g);
//                 return null === match ? '' : match.join(' ');
//             })
//             .addClass(this.value);
//         refreshCode();
//     });
});
</script>
<div style="height: 30em"></div>
</body>
</html>